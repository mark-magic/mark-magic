<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>API Reference</title><meta name="description" content="Documentation for API Reference"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">API Reference</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>API Reference</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#mami-cross-tool-document-converter" id="mami-cross-tool-document-converter" style="color: inherit; text-decoration: none;">
  <h1>mami: cross-tool document converter</h1>
</a>

<a href="#introduction" id="introduction" style="color: inherit; text-decoration: none;">
  <h2>Introduction</h2>
</a>
<p>mami is a conversion tool that can connect different markdown-based frameworks and tools, and can convert the data of one tool to another tool, which is very helpful for cross-application migration and multi-platform release, currently supports <code>joplin/obsidian/hexo/hugo/docsify/vuepress/raw</code>.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<blockquote>
<p>Requirements</p>
<ul>
<li>you need to install <a href="https://nodejs.org/en/download/">nodejs 18</a></li>
</ul>
</blockquote>

<a href="#step-1-create-a-new-project" id="step-1-create-a-new-project" style="color: inherit; text-decoration: none;">
  <h3>Step 1: Create a new project</h3>
</a>
<blockquote>
<p>The following uses pnpm as the package manager, but you can replace it with npm</p>
</blockquote>
<p>Create a new directory and enter</p>
<pre><code class="language-sh"><span class="hl-0">mkdir mami-starter &amp;&amp; </span><span class="hl-1">cd</span><span class="hl-0"> mami-starter</span>
</code></pre>
<p>Then use your favorite package manager to initialize</p>
<pre><code class="language-sh"><span class="hl-0">pnpm init</span>
</code></pre>

<a href="#step-2-install-mami" id="step-2-install-mami" style="color: inherit; text-decoration: none;">
  <h3>Step 2: Install mami</h3>
</a>
<p>Add @mami/cli and typescript as development dependencies of the project</p>
<pre><code class="language-sh"><span class="hl-0">pnpm i -D @mami/cli typescript</span>
</code></pre>
<p>Add some scripts to <code>package.json</code></p>
<pre><code class="language-json"><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-2">...</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;scripts&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    </span><span class="hl-3">&quot;gen&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;mami&quot;</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-2">...</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Create your config file <code>mami.config.ts</code></p>
<pre><code class="language-ts"><span class="hl-5">import</span><span class="hl-0"> { </span><span class="hl-6">defineConfig</span><span class="hl-0"> } </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@mami/cli&#39;</span><br/><br/><span class="hl-5">export</span><span class="hl-0"> </span><span class="hl-5">default</span><span class="hl-0"> </span><span class="hl-1">defineConfig</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-6">input:</span><span class="hl-0"> [],</span><br/><span class="hl-0">  </span><span class="hl-6">output:</span><span class="hl-0"> [],</span><br/><span class="hl-0">})</span>
</code></pre>
<p>then run</p>
<pre><code class="language-sh"><span class="hl-0">$ pnpm run gen</span><br/><br/><span class="hl-0">&gt; joplin2obsidian-demo@1.0.0 gen</span><br/><span class="hl-0">&gt; mami</span><br/><br/><span class="hl-0">start</span><br/><span class="hl-0">end</span>
</code></pre>
<p>Well, nothing happens because you have no input or output plugin defined. Continue to the next step.</p>

<a href="#step-3-install-the-required-plugins" id="step-3-install-the-required-plugins" style="color: inherit; text-decoration: none;">
  <h3>Step 3: Install the required plugins</h3>
</a>
<p>Install the required plug-ins to connect the required tools. Here we use joplin =&gt; obsidian as an example</p>
<pre><code class="language-ts"><span class="hl-6">pnpm</span><span class="hl-0"> </span><span class="hl-6">i</span><span class="hl-0"> -</span><span class="hl-7">D</span><span class="hl-0"> @</span><span class="hl-6">mami</span><span class="hl-0">/</span><span class="hl-6">plugin</span><span class="hl-0">-</span><span class="hl-6">joplin</span><span class="hl-0"> @</span><span class="hl-6">mami</span><span class="hl-0">/</span><span class="hl-6">plugin</span><span class="hl-0">-</span><span class="hl-6">obsidian</span>
</code></pre>
<p>Modify your config file <code>mami.config.ts</code></p>
<blockquote>
<p>The token required by the joplin plugin here comes from the <a href="https://joplinapp.org/clipper/#troubleshooting-the-web-clipper-service">web clipper service</a></p>
</blockquote>
<pre><code class="language-ts"><span class="hl-5">import</span><span class="hl-0"> { </span><span class="hl-6">defineConfig</span><span class="hl-0"> } </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@mami/cli&#39;</span><br/><span class="hl-5">import</span><span class="hl-0"> </span><span class="hl-8">*</span><span class="hl-0"> </span><span class="hl-5">as</span><span class="hl-0"> </span><span class="hl-6">joplin</span><span class="hl-0"> </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@mami/plugin-joplin&#39;</span><br/><span class="hl-5">import</span><span class="hl-0"> </span><span class="hl-8">*</span><span class="hl-0"> </span><span class="hl-5">as</span><span class="hl-0"> </span><span class="hl-6">obsidian</span><span class="hl-0"> </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@mami/plugin-obsidian&#39;</span><br/><span class="hl-5">import</span><span class="hl-0"> </span><span class="hl-6">path</span><span class="hl-0"> </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-4">&#39;path&#39;</span><br/><br/><span class="hl-5">export</span><span class="hl-0"> </span><span class="hl-5">default</span><span class="hl-0"> </span><span class="hl-1">defineConfig</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-6">input:</span><span class="hl-0"> [</span><br/><span class="hl-0">    </span><span class="hl-6">joplin</span><span class="hl-0">.</span><span class="hl-1">input</span><span class="hl-0">({</span><br/><span class="hl-0">      </span><span class="hl-6">baseUrl:</span><span class="hl-0"> </span><span class="hl-4">&#39;http://127.0.0.1:41184&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-6">token:</span><br/><span class="hl-0">        </span><span class="hl-4">&#39;5bcfa49330788dd68efea27a0a133d2df24df68c3fd78731eaa9914ef34811a34a782233025ed8a651677ec303de6a04e54b57a27d48898ff043fd812d8e0b31&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-6">tag:</span><span class="hl-0"> </span><span class="hl-4">&#39;&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    }),</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-6">output:</span><span class="hl-0"> [</span><br/><span class="hl-0">    </span><span class="hl-6">obsidian</span><span class="hl-0">.</span><span class="hl-1">output</span><span class="hl-0">({</span><br/><span class="hl-0">      </span><span class="hl-6">root:</span><span class="hl-0"> </span><span class="hl-6">path</span><span class="hl-0">.</span><span class="hl-1">resolve</span><span class="hl-0">(</span><span class="hl-6">__dirname</span><span class="hl-0">, </span><span class="hl-4">&#39;dist&#39;</span><span class="hl-0">),</span><br/><span class="hl-0">    }),</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">})</span>
</code></pre>

<a href="#step-4-perform-the-conversion" id="step-4-perform-the-conversion" style="color: inherit; text-decoration: none;">
  <h3>Step 4: Perform the conversion</h3>
</a>
<p>Then you can rerun the following command</p>
<pre><code class="language-sh"><span class="hl-0">pnpm run gen</span>
</code></pre>
<p>Now you will see the converted obsidian file in dist</p>
<blockquote>
<p><a href="https://github.com/rxliuli/mami/tree/master/demos/joplin2obsidian-demo">example</a></p>
</blockquote>

<a href="#plugins" id="plugins" style="color: inherit; text-decoration: none;">
  <h2>plugins</h2>
</a>
<blockquote>
<p><a href="https://mami.rxliuli.com/api/">API Documentation</a></p>
</blockquote>
<p>Roughly speaking, plugins are divided into input and output plugins. The input plugin will return an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncGenerator">AsyncGenerator</a>, while the output plugin will return an AsyncGenerator will consume it in the <code>handle hook</code> function.</p>
<p><img src="./public/design.drawio.svg" alt="design"></p>
<p>Intermediate format</p>
<pre><code class="language-json"><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;id&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;0e2510c9272449dbafe3e0f3fba12d74&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;Welcome to Joplin!&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;content&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;content body&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;createAt&quot;</span><span class="hl-0">: </span><span class="hl-9">1666288266591</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;updateAt&quot;</span><span class="hl-0">: </span><span class="hl-9">1666288266591</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;path&quot;</span><span class="hl-0">: [</span><span class="hl-4">&quot;Welcome! (Desktop)&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;tags&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">&quot;id&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;04dfa5cf19e4435f9f3f09a73a7edfb2&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;blog&quot;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;resources&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">&quot;id&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;63b83e548b7b4adfae18544b7038b0bc&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;AllClients.png&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">&quot;raw&quot;</span><span class="hl-0">: </span><span class="hl-4">&quot;&lt;nodejs buffer&gt;&quot;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ]</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Writing plugins involves some markdown ast operations. For example, you may need to convert links in markdown. It is recommended to use <a href="https://github.com/syntax-tree/mdast">mdast</a> to handle it.</p>

<a href="#motivation" id="motivation" style="color: inherit; text-decoration: none;">
  <h2>Motivation</h2>
</a>
<p>Why started this rewrite?</p>
<p>The main reason is that some frameworks are currently supported, but it is still not enough. In my case, I have come into contact with the vitepress documentation generator. I plan to use it to replace vuepress, but this requires some modifications to joplin-blog, which actually does not not very convenient. Some people have also mentioned how to generate more customized files, such as adding additional yaml meta information to the generated markdown (ref: <a href="https://github.com/rxliuli/joplin-utils/issues/55">https://github.com/rxliuli/joplin-utils/issues/55</a>), which It&#39;s actually a bit cumbersome without extension points, the temporary solution given at that time was to use joplin-blog in the form of a lib, and insert some custom logic to do it. There is also mention of supporting hugo, but it is not shown that all is implemented in joplin-blog.</p>
<p>Later, I realized that a plugin system is needed to support generating arbitrary framework files, and further, I can even add input sources such as joplin as plugins, just like pandoc, to connect different note-taking, blogging and wiki tools. One of the current attempts is mami, which intends to use markdown as an intermediate format for conversion.
At present, this project has just been created, and only supports joplin as input source and hexo/local-dir as output source, but I have already used it in my own blog, reference: &lt;<a href="https://github.com/rxliuli/blog/">https://github.com/rxliuli/blog/</a> blob/master/mami.config.ts&gt;</p>
<blockquote>
<p>PS: The origin of the name mami is [Mami Tomoe] in Puella Magi Madoka Magica (<a href="https://en.wikipedia.org/wiki/Mami_Tomoe">https://en.wikipedia.org/wiki/Mami_Tomoe</a>), her magic is a <strong>ribbon</strong> that can connect various things , and can even form a musket (:</p>
</blockquote>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">API <wbr/>Reference</a>
<ul>
<li class="tsd-kind-module"><a href="modules/_mami_cli.html">@mami/cli</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_docsify.html">@mami/plugin-<wbr/>docsify</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_hexo.html">@mami/plugin-<wbr/>hexo</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_hugo.html">@mami/plugin-<wbr/>hugo</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_joplin.html">@mami/plugin-<wbr/>joplin</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_local.html">@mami/plugin-<wbr/>local</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_obsidian.html">@mami/plugin-<wbr/>obsidian</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_raw.html">@mami/plugin-<wbr/>raw</a></li>
<li class="tsd-kind-module"><a href="modules/_mami_plugin_vuepress.html">@mami/plugin-<wbr/>vuepress</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>