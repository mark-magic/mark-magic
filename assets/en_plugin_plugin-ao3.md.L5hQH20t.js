import{_ as s,c as i,o as a,R as n}from"./chunks/framework.ZUvglspe.js";const E=JSON.parse('{"title":"plugin-ao3","description":"","frontmatter":{},"headers":[],"relativePath":"en/plugin/plugin-ao3.md","filePath":"en/plugin/plugin-ao3.md"}'),e={name:"en/plugin/plugin-ao3.md"},t=n(`<h1 id="plugin-ao3" tabindex="-1">plugin-ao3 <a class="header-anchor" href="#plugin-ao3" aria-label="Permalink to &quot;plugin-ao3&quot;">​</a></h1><p>Download novels from <a href="https://archiveofourown.org/" target="_blank" rel="noreferrer">ao3</a>, or publish novels to ao3.</p><h2 id="input" tabindex="-1">input <a class="header-anchor" href="#input" aria-label="Permalink to &quot;input&quot;">​</a></h2><p>It can be used with other plugins to convert it into other formats, such as epub.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fetch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@mark-magic/plugin-ao3&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://forums.sufficientvelocity.com/threads/puella-magi-adfligo-systema.2538/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        site</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sufficientvelocity</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        cached</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@mark-magic/plugin-epub&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./dist/epub/puella-magi-adfligo-systema.epub</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pmas</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Puella Magi Adfligo Systema</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        creator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Firnagzen</span></span></code></pre></div><p>Fortunately, <a href="https://epubhub.rxliuli.com/" target="_blank" rel="noreferrer">epubhub</a> has been implemented based on this plugin for downloading epub from fan fiction websites, there is no need to use the more underlying mark-magic command line tool.</p><h3 id="url" tabindex="-1">url <a class="header-anchor" href="#url" aria-label="Permalink to &quot;url&quot;">​</a></h3><p>The address to download the novel. It will automatically recognize the book&#39;s id. For instance, the following links will be correctly recognized:</p><ul><li><a href="https://archiveofourown.org/works/777002/chapters/1461984" target="_blank" rel="noreferrer">https://archiveofourown.org/works/777002/chapters/1461984</a></li><li><a href="https://archiveofourown.org/works/777002/" target="_blank" rel="noreferrer">https://archiveofourown.org/works/777002/</a></li></ul><p>This plugin also supports the following websites as input:</p><ul><li><a href="https://forums.sufficientvelocity.com" target="_blank" rel="noreferrer">https://forums.sufficientvelocity.com</a></li><li><a href="https://forums.spacebattles.com/" target="_blank" rel="noreferrer">https://forums.spacebattles.com/</a></li><li><a href="https://www.bilibili.com/read/home" target="_blank" rel="noreferrer">https://www.bilibili.com/read/home</a></li></ul><h2 id="output" tabindex="-1">output <a class="header-anchor" href="#output" aria-label="Permalink to &quot;output&quot;">​</a></h2><p>Publish markdown novels to other places, or combine input to sync novels on sv/sb forums with ao3.</p><p>For instance, the configuration of publishing the pmas Chinese translation to ao3 is as follows, see: <a href="https://github.com/liuli-moe/pmas/blob/main/mark-magic.config.yaml#L54-L66" target="_blank" rel="noreferrer">https://github.com/liuli-moe/pmas/blob/main/mark-magic.config.yaml#L54-L66</a></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">publishToAo3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@mark-magic/plugin-local&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./books/zh-CN</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ignore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;999.md&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;12*.md&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@mark-magic/plugin-ao3&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;53445904&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        cookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${AO3_COOKIE}</span></span></code></pre></div><h3 id="id" tabindex="-1">id <a class="header-anchor" href="#id" aria-label="Permalink to &quot;id&quot;">​</a></h3><p>The id of the book that needs to be synced. For instance, the book&#39;s id for <a href="https://archiveofourown.org/works/777002/" target="_blank" rel="noreferrer">https://archiveofourown.org/works/777002/</a> is 777002.</p><h3 id="cookie" tabindex="-1">cookie <a class="header-anchor" href="#cookie" aria-label="Permalink to &quot;cookie&quot;">​</a></h3><p>The authentication information after logging in to the ao3 account can be copied from the cookies in the browser&#39;s developer tool.</p><blockquote><p><strong>⚠️ Warning: Do not send cookies to others or post them on the internet, having them is equivalent to having your account password!</strong> If you need to sync configuration files, you should use <a href="./../config.html">environment variables</a> to quote confidential information.</p></blockquote><p>Specific Steps</p><ol><li><p>Log in to the ao3 website.</p></li><li><p>Open the developer console from <strong>More Tool &gt; Developer Tools</strong> menu, or use <code>Command+Option+I(Mac)/Ctrl+Shift+I(Windows)</code>.</p></li><li><p>Switch to the <strong>Network</strong> tab.</p></li><li><p>Refresh the webpage.</p></li><li><p>Find the first request, right-click to choose <strong>Copy &gt; Copy as cURL</strong>.</p></li><li><p>Find the cookie from cURL, the cookie in the simplified curl command below is <code>view_adult=true; user_credentials=1; ********67f</code></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://archiveofourown.org/works/777002/chapters/1461984&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cookie: view_adult=true; user_credentials=1; ********67f&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> --compressed</span></span></code></pre></div></li></ol>`,22),l=[t];function h(p,o,r,k,c,d){return a(),i("div",null,l)}const u=s(e,[["render",h]]);export{E as __pageData,u as default};
